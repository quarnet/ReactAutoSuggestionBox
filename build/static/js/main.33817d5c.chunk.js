(this["webpackJsonpreact-autosuggestion-box"]=this["webpackJsonpreact-autosuggestion-box"]||[]).push([[0],{27:function(e,a){a.getEditDistance=function(e,a){if(0===e.length)return a.length;if(0===a.length)return e.length;var t,n,l=[];for(t=0;t<=a.length;t++)l[t]=[t];for(n=0;n<=e.length;n++)l[0][n]=n;for(t=1;t<=a.length;t++)for(n=1;n<=e.length;n++)a.charAt(t-1)===e.charAt(n-1)?l[t][n]=l[t-1][n-1]:l[t][n]=Math.min(l[t-1][n-1]+1,Math.min(l[t][n-1]+1,l[t-1][n]+1));return l[a.length][e.length]}},30:function(e,a,t){e.exports=t(59)},35:function(e,a,t){},36:function(e,a,t){},59:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(8),c=t.n(s),r=(t(35),t(36),t(2)),i=t(9),o=t(11),m=t(10),u=t(12),d=t(5),p=t(26),v=t.n(p),E=function e(a,t,n){Object(r.a)(this,e),this.code=a,this.name=t,this.symbol=n},g=function e(a,t){Object(r.a)(this,e),this.lat=a,this.lng=t},b=function e(a,t,n,l){Object(r.a)(this,e),this.iso639_1=a,this.iso639_2=t,this.name=n,this.nativeName=l},h=function e(){Object(r.a)(this,e),this.name=null,this.alpha2Code=null,this.alpha3Code=null,this.callingCodes=[],this.capital=null,this.region=null,this.subregion=null,this.population=null,this.latlng=new g,this.area=null,this.timezones=[],this.nativeName=null,this.numericCode=null,this.currencies=[],this.languages=[],this.flag=null,this.cioc=null},N=function(e){var a=new h;return a.alpha2Code=e.alpha2Code,a.alpha3Code=e.alpha3Code,a.area=e.area,a.callingCodes=e.callingCodes,a.capital=e.capital,a.cioc=e.cioc,a.flag=e.flag,a.latlng=new g(e.latlng[0],e.latlng[1]),a.name=e.name,a.nativeName=e.nativeName,a.numericCode=e.numericCode,a.population=e.population,a.region=e.region,a.subregion=e.subregion,a.timezones=e.timezones,a.currencies=e.currencies.map((function(e){return new E(e.code,e.name,e.symbol)})),a.languages=e.languages.map((function(e){return new b(e.iso639_1,e.iso639_2,e.name,e.nativeName)})),a},f=function(e){return e.toUpperCase()},w=function(e){return{type:"GET_ALL_COUNTRIES",payload:{data:e}}},y=function(){return function(e){var a=function(e){var a=localStorage.getItem("countries");return a?JSON.parse(a):null}();return a?(e(w(a.map((function(e){return N(e)})))),Promise.resolve(!0)):v.a.get("https://restcountries.eu/rest/v2/all").then((function(e){return e.data})).then((function(a){var t;return e(w(a.map((function(e){return N(e)})))),t=a,localStorage.setItem("countries",JSON.stringify(t)),!0})).catch((function(a){return e({type:"SET_ERROR",payload:{error:"Failed to load data from API. Please reload the page."}}),!1}))}},C=t(6),O=t(29),j=t(27),S=function(e){var a=e.url,t=e.imgClass;return l.a.createElement("div",{className:t},l.a.createElement("img",{src:a,alt:"flag",className:"flag-img"}))},D=function(e){var a=e.optionData,t=e.isActive;return l.a.createElement("div",{className:["suggestion-option",t?"active":""].join(" "),onClick:function(){return e.clicked(a)}},l.a.createElement("div",{className:"country-flag-sm"},l.a.createElement(S,{url:a.flag,imgClass:"country-flag-wrapper"})),l.a.createElement("div",{className:"country-sm"},l.a.createElement("div",{className:"country-row"},l.a.createElement("b",null,f(a.name))," - "+a.alpha3Code+" ("+a.nativeName+")"),l.a.createElement("div",{className:"country-detail-row"},a.region+" (capital: "+a.capital+") + Popu.: "+a.population)))},A=function(e){function a(){var e,t;Object(r.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).dataAccessor=t.props.dataAccessor,t.onSelect=t.props.onSelect,t.state={isDataAvailable:!1,isDownloading:!1,data:[],options:[],showOptions:!1,keyword:"",activeIndex:-1},t.getData=function(){t.setState({isDownloading:!0},(function(){t.dataAccessor().then((function(e){t.setState({data:Object(O.a)(e),isDataAvailable:!0,isDownloading:!1},(function(){t.filterData(t.state.keyword)}))}))}))},t.filterData=function(e){var a=t.state.data.map((function(a){var t=Object(j.getEditDistance)(e,a.name);return Object(C.a)({},a,{d:t})})).sort((function(e,a){return e.d-a.d})).slice(0,10);t.setState({options:a})},t.onchange=function(e){var a=e.target.value,n=!t.state.isDataAvailable;t.setState({keyword:a,showOptions:!!a.length},(function(){n?t.getData():t.filterData(a)}))},t.keyDown=function(e){var a=e.keyCode,n=t.state.activeIndex,l=n;switch(a){case 38:l=0===l?t.state.options.length-1:l-1;break;case 37:case 39:break;case 40:l=l===t.state.options.length-1?0:l+1;break;case 13:var s=t.state.options;return void(s.length&&n>=0&&n<=s.length&&(t.setState({showOptions:!1,keyword:"",activeIndex:-1,options:[]}),t.onSelect(s[n])));case 27:return void t.setState({showOptions:!1});default:return}l!==n&&t.setState({activeIndex:l})},t.optionSelected=function(e){t.setState({showOptions:!1,keyword:"",activeIndex:-1,options:[]}),t.onSelect(e)},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"suggestionbox-container"},l.a.createElement("div",{className:"suggestionbox-label"},"Search"),l.a.createElement("div",{className:"suggestionbox-wrapper"},l.a.createElement("input",{onChange:this.onchange,value:this.state.keyword,onKeyDown:this.keyDown,className:"suggestionbox"}),this.state.showOptions&&l.a.createElement("div",{className:"suggestionbox-options-wrapper"},l.a.createElement("ul",{className:"suggestionbox-options"},this.state.options.map((function(a,t){var n=t===e.state.activeIndex;return l.a.createElement(D,{key:a.name,optionData:a,isActive:n,clicked:e.optionSelected})}))))))}}]),a}(n.Component),k=function(e){function a(){var e,t;Object(r.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).getCountriesData=function(){return t.props.getCountries().then((function(e){return t.props.countries}))},t.onSelect=function(e){t.props.setCountry(e)},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"app-header"},l.a.createElement(A,{dataAccessor:this.getCountriesData,onSelect:this.onSelect}))}}]),a}(n.Component),x=Object(d.b)((function(e){return{isError:e.isError,countries:e.allCountries}}),(function(e){return{getCountries:function(){return e(y())},setCountry:function(a){return e(function(e){return{type:"SET_ACTIVE_COUNTRY",payload:{country:e}}}(a))}}}))(k),I=Object(d.b)((function(e){return{countryData:e.activeCountry}}))((function(e){var a=e.countryData,t=e.countryData?l.a.createElement("div",{className:"country-details"},l.a.createElement("div",{className:"country-flag-bg"},l.a.createElement(S,{url:a.flag,imgClass:"flag-big"})),l.a.createElement("div",{className:"country-bg-main"},l.a.createElement("div",{className:"tbl"},l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Name : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},f(a.name)))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Native Name : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.nativeName))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Region : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.region))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Latitude : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.latlng.lat))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Longitude : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.latlng.lng))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Population : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.population))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Area : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.area))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Alpha 2 Code : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.alpha2Code))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Alpha 3 Code : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.alpha3Code))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Calling Codes : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.callingCodes.join(", ")))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Time Zones : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.timezones.join(", ")))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Numeric Code : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.numericCode))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Currencies : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.currencies.map((function(e){return e.name+" ("+e.symbol+")"})).join(", ")))),l.a.createElement("div",{className:"tbl-row"},l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-label"},"Languages : ")),l.a.createElement("div",{className:"tbl-cell"},l.a.createElement("span",{className:"data-value"},a.languages.map((function(e){return e.name})).join(", "))))))):l.a.createElement("div",{className:"empty-country"},"Please search a country.");return l.a.createElement("div",{className:"country-details-wrapper"},t)}));var _=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(x,null),l.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=t(7),R={isDataAvailable:!1,isError:!1,error:null,allCountries:[],activeCountry:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ALL_COUNTRIES":return Object(C.a)({},e,{allCountries:a.payload.data,isDataAvailable:!0,isError:!1});case"SET_ERROR":return Object(C.a)({},e,{isError:!0,error:a.payload.error});case"SET_ACTIVE_COUNTRY":return Object(C.a)({},e,{activeCountry:a.payload.country});default:return e}},P=t(28),U=Object(T.c)(L,Object(T.a)(P.a));c.a.render(l.a.createElement(d.a,{store:U},l.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.33817d5c.chunk.js.map